<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>実験用</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.15/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-50 p-5 md:p-10">
    <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-md overflow-hidden p-5 md:p-10">
        <h1 class="text-2xl md:text-3xl font-bold mb-4">対話実験用</h1>
        <button id="dialogButton" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700 mb-6">
            対話例を表示
        </button>

        <div id="dialog-container" class="space-y-4">
            <!-- 外部ファイルがここに読み込まれます -->
        </div>
    </div>

    <script>
        // ダイアログを読み込む
        function loadDialogs() {
            fetch('dialogs.html')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('dialog-container').innerHTML = data;
                })
                .catch(error => console.error('Error loading dialogs:', error));
        }
        // ページ読み込み時に外部ファイルを読み込む
        window.onload = loadDialogs;

        // ボタン
        document.getElementById('dialogButton').addEventListener('click', function () {
            generateRandomDialogs();
            // ボタンを非表示にする
            this.style.display = 'none';
        });

        //　対話をランダムに表示する
        function generateRandomDialogs() {
            const names = ['Endo', 'Ito', 'Iwahashi', 'Kato', 'Kawashima', 'Kobayashi', 'Matsumoto', 'Mizutani', 'Nakamura', 'Osaki', 'Sakai', 'Sato', 'Takahashi', 'Takayama', 'Tanaka', 'Yamamoto'];
            // const names = ['Endo', 'Ito', 'Iwahashi', 'Kato'];
            const models = ['A', 'B', 'C'];
            const randomNames = [];
            const randomModels = [];
            const selectedDialogs = [];

            // 名前リストからランダムに3つを選ぶ
            while (randomNames.length < 3) {
                const randName = names[Math.floor(Math.random() * names.length)];
                if (!randomNames.includes(randName)) {
                    randomNames.push(randName);
                }
            }

            // モデルリストをシャッフルしてrandomModelsに追加
            for (let i = models.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [models[i], models[j]] = [models[j], models[i]];
            }
            randomModels.push(...models);

            // 選ばれた名前とシャッフルされたモデルの組み合わせを作る
            for (let i = 0; i < 3; i++) {
                const dialogId = 'dialog_' + randomModels[i] + '_' + randomNames[i];
                selectedDialogs.push(dialogId);
            }

            // すべての対話例を非表示にする
            const allDialogs = document.querySelectorAll('#dialog-container > div');
            allDialogs.forEach(dialog => dialog.classList.add('hidden'));

            // 選ばれた対話例を表示し、適切な位置に移動する
            const dialogContainer = document.getElementById('dialog-container');
            selectedDialogs.forEach(dialogId => {
                const dialogElement = document.getElementById(dialogId);
                dialogElement.classList.remove('hidden');
                dialogContainer.appendChild(dialogElement);  // 対話をコンテナの最後に移動
            });
        }
        // ボタンのクリックイベントにリスナーを追加
    </script>

</body>

</html>